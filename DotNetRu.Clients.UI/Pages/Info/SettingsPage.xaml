<?xml version="1.0" encoding="UTF-8"?>
<pages:BasePage
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="DotNetRu.Clients.UI.Pages.Info.SettingsPage"
    xmlns:pages="clr-namespace:DotNetRu.Clients.UI.Pages;assembly=DotNetRu.Clients.UI"
    xmlns:converters="clr-namespace:DotNetRu.Clients.UI.Converters;assembly=DotNetRu.Clients.UI"
    xmlns:controls="clr-namespace:DotNetRu.Clients.UI.Controls;assembly=DotNetRu.Clients.UI"
    x:Name="AboutPage"
    Title="{Binding Resources[About]}"
    Icon="tab_about.png"
    NavigationPage.BackButtonTitle="Info"
    BackgroundColor="{DynamicResource WindowBackgroundTable}">
  <pages:BasePage.Resources>
    <ResourceDictionary>
      <converters:SpeakerImageConverter x:Key="SpeakerImageConverter" />
    </ResourceDictionary>
  </pages:BasePage.Resources>

  <controls:AlwaysScrollView>
    <StackLayout Spacing="0">
      <StackLayout
          BackgroundColor="{DynamicResource WindowBackgroundTable}"
          Spacing="{DynamicResource CardSpacing}"
          Padding="{DynamicResource CardPadding}">
        <controls:CardView>
          <StackLayout Spacing="0">
            <controls:LabelSection Text="{Binding AppInfo}"/>
            <controls:LabelSection Text="{Binding Resources[OurCommunities]}"/>
            <controls:HeaderDivider/>
            <controls:NonScrollableListView
                x:Name="ListViewCommunities"
                ItemsSource="{Binding Communities}"
                RowHeight="44">
              <controls:NonScrollableListView.SeparatorColor>
                <OnPlatform x:TypeArguments="Color" iOS="{StaticResource ListSeparator}"/>
              </controls:NonScrollableListView.SeparatorColor>
              <controls:NonScrollableListView.ItemTemplate>
                <DataTemplate>
                  <ViewCell>
                    <StackLayout Orientation="Horizontal">
                      <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding Command}" CommandParameter="{Binding Parameter}"/>
                      </StackLayout.GestureRecognizers>
                      <Image Source="{Binding Icon, Converter={StaticResource SpeakerImageConverter}}" WidthRequest="30" HeightRequest="30" Margin="10, 10, 15, 10" />
                      <Label Text="{Binding Name}" Margin="10, 10, 15, 10"/>
                    </StackLayout>
                  </ViewCell>
                </DataTemplate>
              </controls:NonScrollableListView.ItemTemplate>
            </controls:NonScrollableListView>
            <controls:FooterDivider/>
            <StackLayout>
              <StackLayout.Padding>
                <OnPlatform x:TypeArguments="Thickness" iOS="16,8,16,0" Android="16,8"/>
              </StackLayout.Padding>
            </StackLayout>
          </StackLayout>
        </controls:CardView>
        <controls:CardView>
          <StackLayout Spacing="0">
            <StackLayout Spacing="10">
              <StackLayout.Padding>
                <OnPlatform x:TypeArguments="Thickness" iOS="16,8,16,8" Android="16,8"/>
              </StackLayout.Padding>
              <Button
                  Text="{Binding Resources[Friends]}"
                  Clicked="Friends_OnClicked"
                  TextColor="White"
                  HorizontalOptions="FillAndExpand"
                  BackgroundColor="{StaticResource Primary}"
                  StyleId="AndroidReminderButton">
              </Button>
              <Button
                  Text="{Binding Resources[TechnologyUsed]}"
                  Clicked="Technologies_OnClicked"
                  TextColor="White"
                  HorizontalOptions="FillAndExpand"
                  BackgroundColor="{StaticResource Primary}"
                  StyleId="AndroidReminderButton">
              </Button>
              <Label Text="{Binding Resources[Language]}" />
              <Picker ItemsSource="{Binding Languages}" SelectedItem="{Binding SelectedLanguage, Mode=TwoWay}" />
              <Label Text="{Binding AppVersion}"
                       Style="{DynamicResource EvolveListItemDetailTextStyle}"/>
              <Label Text="{Binding Copyright}"
                     Style="{DynamicResource EvolveListItemDetailTextStyle}"/>
            </StackLayout>
            <controls:HeaderDivider/>
            <controls:NonScrollableListView
                x:Name="ListViewAbout"
                ItemsSource="{Binding AboutItems}"
                RowHeight="44">
              <controls:NonScrollableListView.SeparatorColor>
                <OnPlatform x:TypeArguments="Color" iOS="{StaticResource ListSeparator}"/>
              </controls:NonScrollableListView.SeparatorColor>
              <controls:NonScrollableListView.ItemTemplate>
                <DataTemplate>
                  <TextCell Text="{Binding Name}"
                             Detail="{Binding Subtitle}"
                             Command="{Binding Command}"
                             CommandParameter="{Binding Parameter}"
                             StyleId="disclosure"/>
                </DataTemplate>
              </controls:NonScrollableListView.ItemTemplate>
            </controls:NonScrollableListView>
            <controls:FooterDivider/>
          </StackLayout>
        </controls:CardView>
      </StackLayout>
    </StackLayout>
  </controls:AlwaysScrollView>
</pages:BasePage>
